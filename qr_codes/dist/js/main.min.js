"use strict";function banText(e){var a=parseFloat(e.key);isNaN(a)&&e.preventDefault()}function preventDefaultFunc(e){e.preventDefault()}function getCoords(e){var a=e.getBoundingClientRect(),o=document.body,t=document.documentElement,r=window.pageYOffset||t.scrollTop||o.scrollTop,s=window.pageXOffset||t.scrollLeft||o.scrollLeft,n=t.clientTop||o.clientTop||0,l=t.clientLeft||o.clientLeft||0;return{top:a.top+r-n,left:a.left+s-l}}function getParams(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,a={};return new URL(e).searchParams.forEach((function(e,o){void 0!==a[o]?(Array.isArray(a[o])||(a[o]=[a[o]]),a[o].push(e)):a[o]=e})),a}function formNameValid(e,a){var o=e.val().length;return 0===o?(a=!1,e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-error").show()):0!==o&&o<2?(a=!1,e.parent().find(".msg").hide(),e.parent().find(".msg-empty").show(),e.addClass("validate")):(a=!0,e.removeClass("validate"),e.parent().find(".msg").hide()),a}function formPhoneValid(e,a){var o=e.val().length;return 0===o?(a=!1,e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-error").show()):o<10&&o>0?(a=!1,e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-empty").show()):(a=!0,e.removeClass("validate"),e.parent().find(".msg").hide()),a}function formEmailValid(e,a,o){var t=e.val().split("@"),r=e.val().length;return o?0===r?(e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-error").show(),a=!1):r>0&&1===(e.val().match(/.+?\@.+\.+/g)||[]).length?t[0].length<3?(e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-error-length").show(),a=!1):(e.removeClass("validate"),e.parent().find(".msg").hide(),a=!0):(e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-empty").show(),a=!1):r>0?r>0&&1===(e.val().match(/.+?\@.+\.+/g)||[]).length?t[0].length<3?(e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-error-length").show(),a=!1):(e.removeClass("validate"),e.parent().find(".msg").hide(),a=!0):(e.addClass("validate-border"),e.parent().find(".msg").hide(),e.parent().find(".msg-error-email").show(),a=!1):a=!0,a}function formTextareaValid(e,a){var o=e.val().length;return 0===o?(a=!1,e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-error").show()):0!==o&&o<100?(a=!1,e.parent().find(".msg").hide(),e.parent().find(".msg-empty").show(),e.addClass("validate")):(a=!0,e.removeClass("validate"),e.parent().find(".msg").hide()),a}function formIndexValid(e,a){var o=e.val().length;return 0===o?(a=!1,e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-error").show()):0!==o&&o<6?(a=!1,e.parent().find(".msg").hide(),e.parent().find(".msg-empty").show(),e.addClass("validate")):(a=!0,e.removeClass("validate"),e.parent().find(".msg").hide()),a}function formAddressValid(e,a){return 0===e.val().length?(a=!1,e.addClass("validate"),e.parent().find(".msg").hide(),e.parent().find(".msg-error").show()):(a=!0,e.removeClass("validate"),e.parent().find(".msg").hide()),a}function formCustomSelectValid(e,a,o){if(o)for(var t=e[0].closest(".select"),r=t.querySelector(".select-title"),s=0;s<e.length;s++){if(e[s].checked){a=!0,r.classList.remove("validate"),t.querySelectorAll(".msg").forEach((function(e){e.style.display="none"}));break}a=!1,r.classList.add("validate"),t.querySelector(".msg-error").style.display="block"}else a=!0;return a}function clickOutside(e,a,o){var t=document.querySelector(e),r=document.querySelector(a);document.addEventListener("click",(function(e){var a=e.target,s=a==t||t.contains(a),n=a==r,l=t.classList.contains(o);s||n||!l||t.classList.toggle(o)}))}function validation(e,a){var o,t=$(e),r=document.querySelector(e),s=t.find('input[name="sales_funnel"]'),n=t.find(".input-name"),l=t.find(".input-phone"),d=t.find(".input-email"),i=t.find(".input-index"),c=t.find(".input-address"),m=t.find('input:not(input[type="submit"], input[type="hidden"], input[type="radio"], input[type="checkbox"]), textarea'),u=t.find("textarea"),f=r.querySelectorAll(".select-content__wrapper > input"),p=t.find('input[type="submit"]'),v=!0,h=!0,g=!0,y=!0,b=!0,_=!0,C=!0;function x(){return(o=[]).push(v),o.push(h),o.push(g),o.push(y),o.push(b),o.push(C),o.push(_),-1===o.indexOf(!1)}m.val(""),n.length>0&&(v=!1),l.length>0&&(h=!1),d.length>0&&(g=!1),i.length>0&&(y=!1),c.length>0&&(b=!1),u.length>0&&(C=!1),f.length>0&&(_=!1),f.length>0&&f.forEach((function(e){e.checked=!1,e.addEventListener("change",(function(){_=formCustomSelectValid(f,_,!0),x()?p.removeClass("disabled"):p.addClass("disabled")}))})),n&&n.on("blur",(function(){v=formNameValid(n,v)})),l&&l.on("blur",(function(){h=formPhoneValid(l,h)})),d&&d.on("blur",(function(){g=formEmailValid(d,g,!0)})),i&&i.on("blur",(function(){y=formIndexValid(i,y)})),c&&c.on("blur",(function(){b=formAddressValid(c,b)})),u&&u.on("blur",(function(){C=formTextareaValid(u,C)})),m.on("blur",(function(){x()?p.removeClass("disabled"):p.addClass("disabled")})),t.off("submit"),t.on("submit",(function(o){if(o.preventDefault(),f.length>0&&(_=formCustomSelectValid(f,_,!0)),n.length>0&&(v=formNameValid(n,v)),l.length>0&&(h=formPhoneValid(l,h)),d.length>0&&(g=formEmailValid(d,g,!0)),i.length>0&&(y=formIndexValid(i,y)),c.length>0&&(b=formAddressValid(c,b)),u.length>0&&(C=formTextareaValid(u,C)),!x())return p.addClass("disabled"),!1;var r,w,S,j,k;switch(p.removeClass("disabled"),window.history.replaceState(null,null,window.location.origin+window.location.pathname),e){case"#lead_form":r={action:"crm_send",userName:n.val(),userEmail:d.val(),userPhone:l.val().trim(),funnel:s.val(),product:"first_contact"},$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(a){console.log(a),200===a.code?($(e).closest(".modal").fadeOut(0),$("#modal-lead-thx").fadeIn(215),$("body").removeClass("loader")):($("#modal-lead-thx").fadeIn(215),$("body").removeClass("loader"))}});break;case"#contacts_form":r={action:"crm_send",userName:n.val(),userEmail:d.val(),userPhone:l.val().trim(),funnel:s.val(),product:"first_contact"},$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(e){console.log(e),m.val(""),e.code,$("#modal-lead-thx").fadeIn(215),$("body").removeClass("loader")}});break;case"#review_form":(r=new FormData($(e)[0])).append("action","add_review"),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",contentType:!1,processData:!1,beforeSend:function(e){$("body").addClass("loader")},success:function(a){console.log(a);var o=$("#modal-review-thx");"success"===a.status||"error"===a.status?($(e).closest(".modal").fadeOut(0),o.find(".modal__description").remove(),o.find(".modal__title").html(a.title),o.find(".modal__content")[0].insertAdjacentHTML("beforeend",a.message),o.fadeIn(215)):($(e).closest(".modal").fadeOut(0),o.fadeIn(215)),$("body").removeClass("loader")}});break;case"#lead_course_form":r={action:"crm_send",userName:n.val(),userEmail:d.val(),userPhone:l.val().trim(),funnel:a.pipeline,status_id:a.status_id,orderName:a.title,product:"course_lead"},console.log(r),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(a){console.log(a),200===a.code?($(e).closest(".modal").fadeOut(0),$("#modal-lead-thx").fadeIn(215),$("body").removeClass("loader")):($("#modal-lead-thx").fadeIn(215),$("body").removeClass("loader"))}});break;case"#subscribe_form":r={action:"crm_send",userName:n.val(),userEmail:d.val(),userPhone:l.val().trim(),product:"subscribe",funnel:s.val()},console.log(r),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(e){console.log(e);var a=$("#modal-subscribe-thx"),o=e.response[0].id;n.val(""),d.val(""),l.val(""),200===e.code?(r.action="add_subscriber",r.id=o,$.ajax({url:astrooma.ajaxurl,type:"post",dataType:"json",data:r,beforeSend:function(e){$("body").addClass("loader")},success:function(e){console.log(e);var o=e.status;"success"===o||"error"===o?(a.find(".modal__description").remove(),a.find(".modal__title").html(e.title),a.find(".modal__content")[0].insertAdjacentHTML("beforeend",e.message),a.fadeIn(215)):a.fadeIn(215),$("body").removeClass("loader")}})):(a.fadeIn(215),$("body").removeClass("loader"))}});break;case"#free_course_form":r={action:"send_free",userName:n.val(),userEmail:d.val(),userPhone:l.val().trim(),product:"free_course",funnel:a.pipeline,first:a.pipeline_first,release:a.pipeline_release,offerCode:a.offer_code,id:a.id},console.log(r),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(a){console.log(a);var o=a.message;r.action="crm_send",a.success?r.free="success":r.free="error",console.log(r),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(a){console.log(a);var t=$("#modal-free-course-thx");$(e).closest(".modal").fadeOut(0),t.fadeIn(215),t.find(".modal__description > p").html(o),$("body").removeClass("loader")}})}});break;case"#product_order_form":S=(w=a.title).trim(),(j=t.closest(".modal").find(".modal__price")).find(".price_old").length>0?(k=j.find(".price_new").text().trim().replace(" ",""),k=parseInt(k)):(k=j.find(".price").text().trim().replace(" ",""),k=parseInt(k)),r={action:"order_pay",userName:n.val(),userEmail:d.val(),userPhone:l.val(),orderName:S,orderCost:k,funnel:s.val(),product:"product",location:window.location.href},localStorage.getItem("myData")&&localStorage.removeItem("myData"),localStorage.setItem("myData",JSON.stringify(r)),console.log(r),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(e){console.log(e),e.link?location.href=e.link:($("body").removeClass("loader"),alert("Что-то пошло не так! Попробуйте еще раз или свяжитесь с нами!"))}});break;case"#order__consultation_form":var I=$(o.originalEvent.submitter).hasClass("modal__btn-prepayment");w=a.title,k=a.price,S=w.trim(),r={action:"order_pay",userName:n.val(),userEmail:d.val(),userPhone:l.val(),orderName:S,orderCost:k,product:"consultation",location:window.location.href,funnel:a.funnel,release:a.release,first:a.first,prepayment:a.prepayment,isPrepayment:I,id:a.id},console.log(r),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(e){console.log(e),r.orderCost=e.sum,console.log(r),localStorage.getItem("myData")&&localStorage.removeItem("myData"),localStorage.setItem("myData",JSON.stringify(r)),e.link?location.href=e.link:($("body").removeClass("loader"),alert("Что-то пошло не так! Попробуйте еще раз или свяжитесь с нами!"))}});break;case"#order_form_webinar":S=(w=a.title).replace(/\s+/g," ").trim(),"5134192"===(r={action:"order_pay",userName:n.val(),userEmail:d.val(),userPhone:l.val(),orderName:S,orderCost:a.price,offerCode:a.offerCode,funnel:s.val(),product:"webinar",location:window.location.href}).funnel&&(r.webinarDay=a.day),localStorage.getItem("myData")&&localStorage.removeItem("myData"),localStorage.setItem("myData",JSON.stringify(r)),console.log(r),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(e){console.log(e),e.link?location.href=e.link:($("body").removeClass("loader"),alert("Что-то пошло не так! Попробуйте еще раз или свяжитесь с нами!"))}});break;case"#order_form_course":r={action:"order_pay",userName:n.val(),userEmail:d.val(),userPhone:l.val().trim(),funnel:a.pipeline,status_id:a.status_id,orderCost:a.price,orderName:a.title,offerCode:a.offer_code,product:"course",location:window.location.href},console.log(r),localStorage.getItem("myData")&&localStorage.removeItem("myData"),localStorage.setItem("myData",JSON.stringify(r)),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,dataType:"json",beforeSend:function(e){$("body").addClass("loader")},success:function(e){e.link?location.href=e.link:($("body").removeClass("loader"),alert("Что-то пошло не так! Попробуйте еще раз или свяжитесь с нами!"))}})}}))}function customSelect(e,a,o,t,r,s){document.querySelectorAll(e).forEach((function(e){for(var a=e.querySelectorAll(t),r=a.length,n=0,l=0;l<r&&l<s;l++)n+=a[l].offsetHeight;r<=s&&e.querySelector(o).classList.add("no-scroll"),e.querySelector(o).style.maxHeight=n+32+"px"})),$(e).on("click",t,(function(){var o=$(this).find(r).text(),t=$(this).closest(e);t.hasClass("active")||t.addClass("active"),t.find(a).text(o),t.removeClass("open")})).on("click",a,(function(){$(this).closest(e).hasClass("open")?$(e).removeClass("open"):($(e).removeClass("open"),$(this).closest(e).addClass("open"))}))}screenshots_btn_more.on("click",(function(e){e.preventDefault();var a=$(this),o=a.closest(".screenshots-reviews").find(".screenshots-reviews__list"),t={action:"loadmore",args:a.data("more"),query_vars:astrooma.query_vars};$.ajax({url:astrooma.ajaxurl,type:"post",data:t,beforeSend:function(e){a.text("Загружаем..."),a.addClass("disabled")},success:function(e){window.matchMedia("(max-width: 807.98px)").matches&&o.slick("unslick"),o.replaceWith(e),o=a.closest(".screenshots-reviews").find(".screenshots-reviews__list"),screenshotsSlider(o),a.remove()}})})),$(document).on("click",".reviews-simple__more",(function(e){e.preventDefault();var a=$(this),o=a.closest(".reviews-simple__wrap").find(".reviews-simple__list"),t=$(this).data("args");console.log(t);var r={action:"loadmore_simple_reviews",args:t,query_vars:astrooma.query_vars};console.log(astrooma.ajaxurl),$.ajax({url:astrooma.ajaxurl,type:"post",data:r,beforeSend:function(e){a.text("Загружаем..."),a.addClass("disabled")},success:function(e){o.replaceWith(e),a.remove()},error:function(e,a,o){console.log(e),console.log(a),console.log(o)}})}));
//# sourceMappingURL=main.min.js.map
